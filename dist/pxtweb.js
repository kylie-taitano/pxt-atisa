var pxt;"undefined"==typeof navigator||!/Trident/i.test(navigator.userAgent)||/skipbrowsercheck=1/i.exec(window.location.href)||/\/browsers/i.exec(window.location.href)||(window.location.href="/browsers"),(e=>{let t=[],o=!1,s=!1,n=!1,a;class i{constructor(e){this.log=e,this.q=[],t.push(this)}track(e,r,t){o?this.log(e,r,t):(this.q.push([e,r,t]),20<this.q.length&&this.q.shift())}flush(){for(;this.q.length;){var[e,r,t]=this.q.shift();this.log(e,r,t)}}}let p,c;function r(t){t=t||(()=>!0);let o=[],e=[];return{subscribe(r){return e.forEach(e=>t(e)&&r(e)),o.push(r),()=>{var e=o.indexOf(r);-1!==e&&o.splice(e,1)}},emit(r){e.push(r),t(r)&&o.forEach(e=>e(r))},forEach(r){e.forEach(e=>t(e)&&r(e))}}}{var m=e.perf||(e.perf={});let s;function f(){return Math.round(performance.now()-m.startTimeMs)}function l(e){var r=(e=Math.round(e))%1e3,t=Math.floor(e/1e3),o=t%60,s=Math.floor(t/60);return 0<s?s+`m${o}s`:5<t?t+"s":0<t?t+`s${r}ms`:e+"ms"}function u(e,r){var t=f();m.stats.milestones.emit({milestone:e,time:t,params:r})}function d(){var e;(s=performance&&!!performance.mark&&!!performance.measure)&&(performance.measure("measure from the start of navigation to now"),e=performance.getEntriesByType("measure")[0],m.startTimeMs=e.startTime)}m.measurementThresholdMs=10,m.stats={durations:r(e=>e.duration>=m.measurementThresholdMs),milestones:r()},m.isEnabled=function(){return s},m.perfReportLogged=!1,m.splitMs=f,m.prettyStr=l,m.splitStr=function(){return l(f())},m.recordMilestone=u,m.init=d,m.measureStart=function(e){s&&performance.mark(e+" start")},m.measureEnd=function(e,r){var t,o;s&&performance.getEntriesByName(e+" start").length&&(performance.mark(e+" end"),performance.measure(e+" elapsed",e+" start",e+" end"),(t=performance.getEntriesByName(e+" elapsed","measure"))&&1===t.length&&(o=(t=t[0]).duration,m.stats.durations.emit({name:e,start:t.startTime,duration:o,params:r})),performance.clearMarks(e+" start"),performance.clearMarks(e+" end"),performance.clearMeasures(e+" elapsed"))},m.report=function(){if(m.perfReportLogged=!0,s){let n={},a={},i=`Performance Report:
`;return i=i+`
`+`	Milestones:
`,m.stats.milestones.forEach(({milestone:e,time:r,params:t})=>{var o,s=l(r);i+=`		${e} @ `+s;for(o of Object.keys(t||{}))i+=`
			${o}: `+t[o];i+=`
`,n[e]=r}),i=i+`
`+`	Measurements:
`,m.stats.durations.forEach(({name:e,start:r,duration:t,params:o})=>{var s,n=l(t);i=(i+=`		${e} took ~ `+n)+` (${l(r)} - ${l(r+t)})`;for(s of Object.keys(o||{}))i+=`
			${s}: `+o[s];i+=`
`,a[e]=t}),console.log(i),s=!1,{milestones:n,durations:a}}},d(),u("first JS running")}function h(e=!1){try{var r=new URLSearchParams(window.location.search);r.has("partner")&&(a=r.get("partner"))}catch(e){console.warn("Could not parse search string",e)}r=window.loadAppInsights;r&&(n=r(e,w),o=!0,t.forEach(e=>e.flush()))}function w(e){var r,t=window.pxtConfig;return!("PageviewData"==e.baseType&&!e.baseData.properties||("PageviewPerformanceData"==e.baseType&&(r=e.baseData.name,e.baseData.name=window.location.origin,e.baseData.properties||(e.baseData.properties={}),e.baseData.properties.pageName=r,e.baseData.properties.pathName=window.location.pathname),void 0!==t&&t&&((r=e.baseData).properties=r.properties||{},r.properties.target=t.targetId,r.properties.stage=(t.relprefix||"/--").replace(/[^a-z]/gi,""),r.properties.targetVersion=t.targetVersion,r.properties.pxtVersion=t.pxtVersion,a&&(r.properties.partner=a),e=navigator.userAgent.toLowerCase(),(t=/\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(e))&&(r.properties.Electron=1,r.properties.ElectronVersion=t[1]),void 0!==(t=window.pxtElectron)&&(r.properties.PxtElectron=1,r.properties.ElectronVersion=t.versions.electronVersion,r.properties.ChromiumVersion=t.versions.chromiumVersion,r.properties.NodeVersion=t.versions.nodeVersion,r.properties.PxtElectronVersion=t.versions.pxtElectronVersion,r.properties.PxtCoreVersion=t.versions.pxtCoreVersion,r.properties.PxtTargetVersion=t.versions.pxtTargetVersion,r.properties.PxtElectronIsProd=t.versions.isProd),(t=/\((MakeCode Arcade Kiosk UWP)\/([\S]+)\/([\S]+)\)/i.exec(e))&&(r.properties.KioskUwp=1,r.properties.KioskUwpVersion=t[2],r.properties.KioskUwpPlatform=t[3]),r.properties.cookie=s&&n),0))}e.initAnalyticsAsync=function(){var e,r;e="undefined"!=typeof window,r=e&&!!window.pxtElectron,e=e&&!!window.ipcRenderer||/ipc=1/.test(location.hash)||/ipc=1/.test(location.search),!(r||e||(()=>{try{return window&&window.self!==window.top}catch(e){return!1}})()&&/nocookiebanner=1/i.test(window.location.href))&&window.pxtSkipAnalyticsCookie?h(!1):h(!0)},e.aiTrackEvent=function(e,r,t){(p=p||new i((e,r,t)=>window.appInsights.trackEvent({name:e,properties:r,measurements:t}))).track(e,r,t)},e.aiTrackException=function(e,r,t){(c=c||new i((e,r,t)=>window.appInsights.trackException({exception:e,properties:r?{...t,kind:r}:t}))).track(e,r,t)},e.initializeAppInsightsInternal=h,e.setInteractiveConsent=function(e){s=e}})(pxt=pxt||{});